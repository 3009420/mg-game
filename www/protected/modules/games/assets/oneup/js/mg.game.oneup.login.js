MG_GAME_ONEUP = function ($) {
    return $.extend(MG_GAME_API, {
        gameName: 'One Up',
        submitButton:null,
        user: {},
        back_location: null,
        /*
         * initialize the game. called from inline script generated by the view
         */
        init: function (options) {
            var settings = $.extend(options, {
                ongameinit: MG_GAME_ONEUP.ongameinit
            });
            MG_GAME_API.game_init(settings);
            var game_assets_uri = $("#game_assets_uri").val();

            $('nav#menu-left').mmenu();
            $('nav#menu-right').mmenu({
                position	: 'right',
                counters	: true
            });
        },
        actions: function (action, click_parent) {
            console.log('call for '+ action + " - click from: " + click_parent);
            var continue_action = '';
            $("#header .back").hide();
            switch(action)
            {
                case 'main_screen':

                    break;
                case 'login':
                    alert('No validation or real login yet');
                    window.location.href = $("#game_uri").val() + '/index.php/games/OneUp/play';
                    break;
                case '':
                    alert('comming soon');
                    break;
                default:
                    console.log('action is unknown');
                    break;
            }

            if (click_parent === '') {
                $("#content div:visible:eq(0)").hide();
                $("#" + action).slideUp().show();
            }
        },
        /*
         REGISTER USER AS ONLINE TO GAME SERVER
         */
        onapiinit: function () {
                MG_GAME_API.curtain.hide();

                $("#content a[href='#']").on('click', function(e) {
                    var location = $(this).attr('location');
                    if (location != undefined) {
                        e.preventDefault();
                        var location = $(this).attr('location');
                        $("#content div:visible:eq(0)").hide();
                        MG_GAME_ONEUP.actions(location, '');
                    }
                });

                $("a[location='main_screen']").on('click', function (){
                    MG_GAME_ONEUP.actions('main_screen', 'menu');
                });

                $("a[location='main_screen']").click();
        },
        /*
         * evaluate each response from /api/games/play calls (POST or GET)
         */
        onresponse:function (response) {
            console.log('response');
        },
        /*
         * on callback for the submit button
         */
        onsubmit:function () {
            console.log('onsubmit');
            return false;
        },
        /*
         * this method appears to be not used
         */
        submit:function () {
            console.log('submit');
            return false;
        },
        /*
         * process /api/games/play get request responses
         */
        ongameinit:function (response) {

        }
    });
}(jQuery);

function confirmPretty(text, onOk) {
    $("<div title='Confirmation'>" + text + "</div>").dialog({
        modal: true,
        dialogClass: 'no-title',
        buttons: [{
            text: "Cancel",
            id: "confirm_no",
            click: function () {
                $(this).dialog('destroy').remove();
            }
        }, {
            text: "Ok",
            id: "confirm_yes",
            click: function () {
                onOk();
                $(this).dialog('destroy').remove();
            }
        }]
    });
}