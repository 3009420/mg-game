git pull git://gitorious.org/metadatagames/metadatagames.git refs/merge-requests/1

1. create database and db user
2. Copy everything that is in /www onto the server's web root.
3. Goto /requirements and check that everything is ok

3.1 The system needs an image manipulation component. While it works with GD we recommend to use ImageMagick. 
  xxx add how to install image magick and recommendations for php ini settings
    "sudo aptitude install imagemagick"
    
    UBUNTU 
    " sudo apt-get update
      sudo apt-get install imagemagick --fix-missing 
      "
  xxx make sure the image magick is part of the open_base_dir 
  
    Plesk:
      For domain http://www.linuxweblog.com/plesk-vhost.conf
      For subdomain http://enarion.net/web/plesk/subdomains-and-open_basedir/
      
      Use:  /usr/local/psa/admin/sbin/httpdmng --reconfigure-all to refresh configuration
            then apache2ctl graceful to restart the server
  xxx make sure that we configure imagemagick as the driver for the image extension/component if ImageMagick is installed
  
3.2 PHP INI
  Come up with sensible php ini settings and suggest here 
  If GD memory limit has to be at least 96MB better 128MB 
  mention here that we recommend to turn safe mode off
  
  The functionality of the system depends on
    1. php ini post_max_size
    2. php ini memory_limit
    3. php ini max_input_time
    4. php ini max_execution_time
    5. php ini upload_max_filesize

    These settings influence the import tools differently
        Upload from local computer is generally not really affected as each image will be uploaded in a single request

        Upload zip is affected by all settings (making it it therefore the most difficult tool to control). If we want to bring it into a controlled zone we have either make sure the server settings are "good" [implying to make the user of the system tweak the server settings] or reduce the maxium file size of zip files drastically. One other problem is that raw image material is rather large so a zip file can already reach the max file size quite quickly (10*3MB is 30MB which is already quite big for an upload file size setting)

        FTP is mainly influence by max_execution_time (and memory limit if GD is used). This is fairly simple to control making it therefore in my eyes the tool of choice.

  
4. Make sure the following folder are empty and write able for the web server
/assets
/uploads
/protected/data
/protected/runtime

5. Make sure the file /protected/data/fbvsettings.php is writeable

6. open /protected/config/main.php and search for

  'db'=>array(
      'connectionString' => 'mysql:host=localhost;dbname=mg', //xxx set via installer
      'emulatePrepare' => true,
      'username' => 'root', //xxx set via installer
      'password' => '', //xxx set via installer
      'charset' => 'utf8',
      'tablePrefix'=>'', //xxx set via installer
    ),
  
  change this to match your settings. E.g
  
  'db'=>array(
      'connectionString' => 'mysql:host=localhost;dbname=mg', //xxx set via installer
      'emulatePrepare' => true,
      'username' => 'mg', //xxx set via installer
      'password' => 'mg1234?!', //xxx set via installer
      'charset' => 'utf8',
      'tablePrefix'=>'', //xxx set via installer
    ),
    
  SAVE the file

6.1 configure the admin email address on the very bottom of the same file. 
  
7. Goto the website and see it complain that the active record classes can't be found in the database (CHECK 1 system works)

8. Import the sql script /protected/data/mg.mysql.sql into your database 
  mysql -u dbuser -p databasename < mg.mysql.sql
  
9. Go back to site. Login as admin

The following user are at the moment automatically created

Login: admin
PWD: admin

Login: dbmanager
PWD: dbmanager 

Login: editor
PWD: editor

Login: player
PWD: player

10. Still everything working?

11. Goto admin tools

11. Goto Plugins/Manage Plugins and enable the available import plugins

12. Use the import tools to upload some images into the system.  
13. Process the uploaded images to make them available for the games. 

13. Goto Games and select zentag update
14. Set zentag to active and check the all image set

15. Goto import and upload some images

16. Go back to arcade 
17. Choose Zentag and play ;-) 
  Note: everytime the system shows a previously not shown image it has to create resized versions. Future responses will be faster.
  Note: Yes, at the moment images can repeat. There are plans to omit that.
  
FURTHER INFO
you can now configure a second app environment in /www/protected/config/development.php. This can be access via /www/index_dev.php. This is 
used by me to test the development branch. It will not make it into the master branch.  
